

<style>
  .horizontal-scroll-container {
    display: flex;
    overflow-x: auto;
    gap: 16px;
    padding-bottom: 8px;
    scroll-snap-type: x mandatory;
  }

  .card-page {
    width: 300px;
    flex-shrink: 0;
    scroll-snap-align: start;
    border: 1px solid #ccc;
    border-radius: 8px;
    background: white;
  }

  /* Global */
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background-color: #ffffff;
    color: #333;
    
  }

  /* Layout */
  .layout-page {
    display: flex;
    flex-direction: column;
    height: 100vh;
  }

  .page-navbar {
    background-color: #f7f0e8;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    font-size: 1.2rem;
    text-align: center;
  }

  .main-page {
    display: flex;
    flex: 1;
    padding: 20px;
    gap: 20px;
  }

  .sidebar-left-page,
  .sidebar-right-page {
    width: 200px;
    background-color: #fff;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    flex-shrink: 0;
  }

  .content-page {
    flex: 1;
    background-color: #fff;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    
  }

  /* Cards */
  .card-grid-page {
    display: flex;
    flex-wrap: nowrap;
    flex-direction: row;  
    gap: 15px;
  }

  .card-page {
    background: #fefefe;
    border: 1px solid #ddd;
    border-radius: 6px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    
  }

  .card-page img {
    width: 100%;
    height: 160px;
    object-fit: cover;
  }

  .card-body-page {
    padding: 10px;
    width: 240px
  }

  .card-body-page h3 {
    margin: 0 0 8px;
    font-size: 1.1em;
  }

  .card-body-page p {
    margin: 4px 0;
    font-size: 0.9em;
    color: #555;
  }

  .card-actions-page {
    display: flex;
    justify-content: space-between;
    padding: 10px;
    font-size: 0.85em;
  }

  .card-actions-page a,
  .card-actions-page form {
    color: #007bff;
    text-decoration: none;
  }

  /* Button */
  .btn-new-page {
    display: inline-block;
    margin-top: 15px;
    padding: 8px 12px;
    background-color: #007bff;
    color: white;
    text-decoration: none;
    border-radius: 4px;
  }
  .category-filters {
  height: 70px;
  margin-left: 100px;
  padding: 150px;
  padding-top: 0;
  padding-bottom: 0;
    display: flex;
    justify-content: space-between;
    gap: 20px;
    
    margin-top: 20px;
    margin-left: 20px;
    margin-right: 20px;
  }



  .category-card {
  flex: 1;
  text-align: center;
  padding: 12px;
  border-radius: 8px;
  text-decoration: none;
  font-size: 1rem;
  font-weight: 500;
  display: flex;
  flex-direction: row; /* Changed from column to row */
  align-items: center;
  justify-content: center;
  transition: transform 0.2s ease;
  gap: 8px; /* Space between icon and text */
  }
    

  
    .category-card span {
      margin-top: 10px;
      color: #111;
    }

    .category-card:hover {
      transform: translateY(-5px);
    }

    .category-card.immobilier {
      background-color: #e8f2ff;
      color: #007bff;
    
    }

    .category-card.vehicules {
      background-color: #ffecec;
      color: #e74c3c;
    }

    .category-card.marketplace {
      background-color: #ecfaef;
      color: #27ae60;
    }

    .category-card.emplois {
      background-color: #e9f7f7;
      color: #17a2b8;
    }
  .filter-icon {
    width: 50px; /* Adjust size as needed */
    height: auto; /* Maintain aspect ratio */
  }
  .adimage {
  width: 100%;
  height: 321px; /* Add a specific height */
  object-fit: cover; /* Maintain aspect ratio */
  margin-bottom: 20px;
  border-radius: 8px;
  z-index: 2;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
</style>

<div class="layout-page">
  <!-- Navbar -->
  <%= render 'layouts/navbar' %>

 <div class="category-filters">
  <%= link_to announcement_index_path(category: 'Immobilier'), class: "category-card immobilier" do %>
    <%= image_tag 'icons/category_1000.svg', class: 'filter-icon' %>
    <span>Immobilier</span>
  <% end %>

  <%= link_to announcement_index_path(category: 'Véhicules'), class: "category-card vehicules" do %>
    <%= image_tag 'icons/category_2000.svg', class: 'filter-icon' %> <span>Véhicules</span>
  <% end %>

  <%= link_to announcement_index_path(category: 'Marketplace'), class: "category-card marketplace" do %>
    <%= image_tag 'icons/category_7100.svg', class: 'filter-icon' %> <span>Marketplace</span>
  <% end %>

  <%= link_to announcement_index_path(category: 'Emplois et Services'), class: "category-card emplois" do %>
    <%= image_tag 'icons/category_6000.svg', class: 'filter-icon' %> <span>Emplois et Services</span>
  <% end %>
</div>
  <!-- Main Content Area -->
  <div class="main-page">
    <!-- Center Content (Announcements) -->
    <div class="content-page">
    <% 
  # Determine which image to show based on category parameter
  banner_image = case params[:category]
                 when 'Véhicules'
                   'vehicle_banner.png'
                 when 'Immobilier'
                   'image2.png'
                 when 'Marketplace'
                   'marketplace_banner.png'
                 when 'Emplois et Services'
                   'jobs_banner.png'
                 else
                   'adimage.svg' # Default image for the index page
                 end
%>

<%= image_tag banner_image, class: "adimage", alt: "MyAvito - #{params[:category] || 'All Categories'}" %>
<% @announcements.group_by(&:category).each do |category, grouped_announcements| %>
  <h3>Annonce des <%= category.capitalize %></h3>

  <div class="horizontal-scroll-container">
    <% grouped_announcements.each do |announcement| %>
      <div class="card-page">
        <% if announcement.images.attached? %>
          <%= image_tag announcement.images.first.variant(resize_to_fill: [400, 250]), class: "card-img" %>
        <% else %>
          <div class="no-image" style="height:160px; background:#ddd; text-align:center; line-height:160px; color:#777;">No Image</div>
        <% end %>

        <div class="card-body-page">
          <h3><%= announcement.title %></h3>
          <p><strong>Price:</strong> <%= number_to_currency(announcement.price, unit: announcement.currency) %></p>
          <p><strong>City:</strong> <%= announcement.city %></p>
          <p><%= time_ago_in_words(announcement.published_at) %> ago</p>
          <p>Views: <%= announcement.views_count %></p>
        </div>

        <div class="card-actions-page">
          <%= link_to 'Show', announcement_path(announcement) %>
          <% if authenticated? %>
            <%= link_to 'Edit', edit_announcement_path(announcement) %>
            <%= button_to 'Delete', announcement_path(announcement), method: :delete, data: { confirm: 'Are you sure?' }, form: { style: 'display:inline;' } %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
<% end %>

</div>

     
    </div>



    </div>
    
    
</div>
